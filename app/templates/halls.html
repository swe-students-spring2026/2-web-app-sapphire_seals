{% extends "base.html" %}
{% block content %}
{% set show_header = False %}

<header class="dh-topbar">
    <a class="dh-back" href="/" aria-label="Back">â€¹</a>
    <h1 class="dh-title">Dining Halls</h1>
    <div class="dh-actions">
        <a href="/search" class="dh-action" style="text-decoration:none;">ğŸ”</a>
    </div>
</header>

<section class="dh-section">
    <h2 class="dh-section-title">Available Dining Halls</h2>

    {% if halls and halls|length > 0 %}
    <div class="dh-list">
        {% for hall in halls %}
        <a class="dh-row" href="/halls/{{ hall.id }}">
            <div class="dh-left">
                <span class="dh-star" aria-hidden="true">â­</span>
            </div>

            <div class="dh-mid">
                <div class="dh-name">{{ hall.name }}</div>
                <div class="dh-desc">
                    {% if hall.get('greenRestaurant') %}ğŸŒ¿ Green Restaurant{% endif %}
                    {% if hall.get('mobileOrderingLabel') %}{{ hall.mobileOrderingLabel }}{% endif %}
                    {% if not hall.get('greenRestaurant') and not hall.get('mobileOrderingLabel') %}NYU Dining Hall{% endif %}
                </div>
            </div>

            <div class="dh-right">
                <span class="dh-rating-pill" aria-label="Rating">
                    {% set rating_int = hall.get('avg_rating', 0) | int %}
                    {% for i in range(1, 6) %}
                        {% if i <= rating_int %}
                            <span class="dh-rating-star is-on">â˜…</span>
                        {% else %}
                            <span class="dh-rating-star">â˜…</span>
                        {% endif %}
                    {% endfor %}
                </span>
            </div>
        </a>
        {% endfor %}
    </div>
    {% else %}
    <p class="dh-empty">No dining halls found.</p>
    {% endif %}
</section>

<!-- Bottom Navigation -->
<nav class="bottom-nav" aria-label="Bottom navigation">
    <a class="nav-item" href="/">
        <span class="nav-icon">ğŸ </span>
        <span>Home</span>
    </a>
    <a class="nav-item" href="/search">
        <span class="nav-icon">ğŸ”</span>
        <span>Search</span>
    </a>
    {% if session.get('user_id') %}
    <a href="/users/my_ratings" class="nav-item">
        <span class="nav-icon">â­</span>
        <span>My Ratings</span>
    </a>
    {% else %}
    <a href="/login" class="nav-item">
        <span class="nav-icon">ğŸ‘¤</span>
        <span>Login</span>
    </a>
    {% endif %}
</nav>

{% endblock %}
